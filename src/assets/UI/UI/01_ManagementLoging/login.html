<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Management Portal - Smart Village Management System</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Prompt', sans-serif;
            background: linear-gradient(135deg, #1A2B48 0%, #2E4A6B 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        /* Login Container */
        .login-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            width: 100%;
            max-width: 450px;
            position: relative;
        }

        /* Header */
        .login-header {
            background: linear-gradient(135deg, #1A2B48 0%, #2E4A6B 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .logo-icon {
            background: #28A745;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .logo-text {
            font-size: 20px;
            font-weight: 600;
        }

        .login-title {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .login-subtitle {
            font-size: 16px;
            opacity: 0.9;
            font-weight: 400;
        }

        /* Form */
        .login-form {
            padding: 40px 30px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
            font-size: 14px;
        }

        .form-input-container {
            position: relative;
        }

        .form-input {
            width: 100%;
            padding: 15px 20px 15px 50px;
            border: 2px solid #E5E7EB;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #F9FAFB;
        }

        .form-input:focus {
            outline: none;
            border-color: #1A2B48;
            background: white;
            box-shadow: 0 0 0 3px rgba(26, 43, 72, 0.1);
        }

        .form-icon {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            color: #6B7280;
            font-size: 16px;
        }

        .password-toggle {
            position: absolute;
            right: 18px;
            top: 50%;
            transform: translateY(-50%);
            color: #6B7280;
            cursor: pointer;
            font-size: 16px;
            transition: color 0.3s ease;
        }

        .password-toggle:hover {
            color: #1A2B48;
        }

        /* Checkbox */
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 25px;
        }

        .checkbox {
            width: 18px;
            height: 18px;
            accent-color: #1A2B48;
        }

        .checkbox-label {
            font-size: 14px;
            color: #666;
            cursor: pointer;
        }

        /* Buttons */
        .login-button {
            width: 100%;
            background: linear-gradient(135deg, #1A2B48 0%, #2E4A6B 100%);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .login-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(26, 43, 72, 0.3);
        }

        .login-button:active {
            transform: translateY(0);
        }

        .login-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Links */
        .forgot-password {
            text-align: center;
            margin-bottom: 20px;
        }

        .forgot-password a {
            color: #1A2B48;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
        }

        .forgot-password a:hover {
            text-decoration: underline;
        }

        .terms-links {
            text-align: center;
            font-size: 12px;
            color: #666;
            line-height: 1.5;
        }

        .terms-links a {
            color: #1A2B48;
            text-decoration: none;
        }

        .terms-links a:hover {
            text-decoration: underline;
        }

        /* Footer */
        .login-footer {
            background: #F9FAFB;
            padding: 20px 30px;
            text-align: center;
            font-size: 12px;
            color: #666;
            border-top: 1px solid #E5E7EB;
        }

        /* Popup Overlay */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }

        .popup-overlay.active {
            display: flex;
        }

        /* Popup Container */
        .popup {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 500px;
            max-height: 80vh;
            overflow: hidden;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .popup-overlay.active .popup {
            transform: scale(1);
        }

        .popup-header {
            padding: 25px 30px 20px;
            border-bottom: 1px solid #E5E7EB;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .popup-title {
            font-size: 20px;
            font-weight: 600;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .popup-close {
            background: none;
            border: none;
            font-size: 24px;
            color: #666;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .popup-close:hover {
            background: #F3F4F6;
            color: #333;
        }

        .popup-content {
            padding: 25px 30px;
            max-height: 60vh;
            overflow-y: auto;
        }

        .popup-description {
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .popup-buttons {
            padding: 20px 30px;
            border-top: 1px solid #E5E7EB;
            display: flex;
            gap: 15px;
            justify-content: flex-end;
        }

        .popup-button {
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }

        .popup-button.primary {
            background: #1A2B48;
            color: white;
        }

        .popup-button.primary:hover {
            background: #2E4A6B;
        }

        .popup-button.secondary {
            background: #F3F4F6;
            color: #666;
        }

        .popup-button.secondary:hover {
            background: #E5E7EB;
        }

        .popup-button.success {
            background: #28A745;
            color: white;
        }

        .popup-button.success:hover {
            background: #218838;
        }

        .popup-button.danger {
            background: #DC3545;
            color: white;
        }

        .popup-button.danger:hover {
            background: #C82333;
        }

        /* Success/Error Icons */
        .popup-icon {
            font-size: 48px;
            margin-bottom: 20px;
            text-align: center;
        }

        .popup-icon.success {
            color: #28A745;
        }

        .popup-icon.error {
            color: #DC3545;
        }

        .popup-icon.warning {
            color: #FFC107;
        }

        /* Loading Spinner */
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #1A2B48;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            text-align: center;
            color: #666;
            font-size: 16px;
        }

        /* Terms Content */
        .terms-content {
            line-height: 1.6;
            color: #333;
        }

        .terms-content h3 {
            margin: 20px 0 10px;
            color: #1A2B48;
        }

        .terms-content p {
            margin-bottom: 15px;
        }

        .terms-content ul {
            margin: 10px 0 15px 20px;
        }

        .terms-content li {
            margin-bottom: 5px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .login-container {
                max-width: 100%;
                margin: 0;
            }

            .login-header {
                padding: 30px 20px;
            }

            .login-form {
                padding: 30px 20px;
            }

            .login-footer {
                padding: 15px 20px;
            }

            .popup-content {
                padding: 20px;
            }

            .popup-buttons {
                padding: 15px 20px;
                flex-direction: column;
            }

            .popup-button {
                width: 100%;
            }
        }

        /* Form Validation */
        .form-input.error {
            border-color: #DC3545;
            background: #FFF5F5;
        }

        .error-message {
            color: #DC3545;
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }

        .error-message.show {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Login Container -->
    <div class="login-container">
        <!-- Header -->
        <div class="login-header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-home"></i>
                </div>
                <div class="logo-text">Smart Village</div>
            </div>
            <h1 class="login-title">Management Portal</h1>
            <p class="login-subtitle">สำหรับผู้ดูแลระบบและผู้จัดการหมู่บ้าน</p>
        </div>

        <!-- Form -->
        <form class="login-form" id="loginForm">
            <div class="form-group">
                <label class="form-label" for="username">ชื่อผู้ใช้งาน</label>
                <div class="form-input-container">
                    <i class="fas fa-user-shield form-icon"></i>
                    <input 
                        type="text" 
                        id="username" 
                        class="form-input" 
                        placeholder="กรุณากรอกชื่อผู้ใช้งาน"
                        required
                    >
                </div>
                <div class="error-message" id="usernameError">กรุณากรอกชื่อผู้ใช้งาน</div>
            </div>

            <div class="form-group">
                <label class="form-label" for="password">รหัสผ่าน</label>
                <div class="form-input-container">
                    <i class="fas fa-lock form-icon"></i>
                    <input 
                        type="password" 
                        id="password" 
                        class="form-input" 
                        placeholder="กรุณากรอกรหัสผ่าน"
                        required
                    >
                    <i class="fas fa-eye password-toggle" id="passwordToggle"></i>
                </div>
                <div class="error-message" id="passwordError">กรุณากรอกรหัสผ่าน</div>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="rememberMe" class="checkbox">
                <label for="rememberMe" class="checkbox-label">จดจำการเข้าสู่ระบบ</label>
            </div>

            <button type="submit" class="login-button" id="loginButton">
                เข้าสู่ระบบ
            </button>

            <div class="forgot-password">
                <a href="#" id="forgotPasswordLink">ลืมรหัสผ่าน?</a>
            </div>

            <div class="terms-links">
                การเข้าสู่ระบบแสดงว่าคุณยอมรับ<br>
                <a href="#" id="termsLink">เงื่อนไขการใช้งาน</a> และ 
                <a href="#" id="privacyLink">นโยบายความเป็นส่วนตัว</a>
            </div>
        </form>

        <!-- Footer -->
        <div class="login-footer">
            <p>© 2025 Smart Village Management System</p>
            <p>Version 1.0.0</p>
        </div>
    </div>

    <!-- Forgot Password Popup -->
    <div class="popup-overlay" id="forgotPasswordPopup">
        <div class="popup">
            <div class="popup-header">
                <h3 class="popup-title">
                    <i class="fas fa-key"></i>
                    ลืมรหัสผ่าน
                </h3>
                <button class="popup-close" onclick="closePopup('forgotPasswordPopup')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="popup-content">
                <p class="popup-description">
                    กรุณากรอกอีเมลของคุณ เราจะส่งลิงก์สำหรับรีเซ็ตรหัสผ่านไปให้
                </p>
                <div class="form-group">
                    <label class="form-label" for="resetEmail">อีเมล</label>
                    <div class="form-input-container">
                        <i class="fas fa-envelope form-icon"></i>
                        <input 
                            type="email" 
                            id="resetEmail" 
                            class="form-input" 
                            placeholder="กรุณากรอกอีเมลของคุณ"
                        >
                    </div>
                </div>
            </div>
            <div class="popup-buttons">
                <button class="popup-button secondary" onclick="closePopup('forgotPasswordPopup')">
                    ยกเลิก
                </button>
                <button class="popup-button primary" onclick="sendResetLink()">
                    ส่งลิงก์รีเซ็ต
                </button>
            </div>
        </div>
    </div>

    <!-- Reset Success Popup -->
    <div class="popup-overlay" id="resetSuccessPopup">
        <div class="popup">
            <div class="popup-header">
                <h3 class="popup-title">
                    <i class="fas fa-check-circle"></i>
                    ส่งลิงก์รีเซ็ตเรียบร้อย
                </h3>
                <button class="popup-close" onclick="closePopup('resetSuccessPopup')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="popup-content">
                <div class="popup-icon success">
                    <i class="fas fa-check-circle"></i>
                </div>
                <p class="popup-description">
                    เราได้ส่งลิงก์สำหรับรีเซ็ตรหัสผ่านไปยังอีเมลของคุณแล้ว กรุณาตรวจสอบอีเมลและทำตามขั้นตอนที่ระบุ
                </p>
            </div>
            <div class="popup-buttons">
                <button class="popup-button success" onclick="closePopup('resetSuccessPopup')">
                    ตกลง
                </button>
            </div>
        </div>
    </div>

    <!-- Login Error Popup -->
    <div class="popup-overlay" id="loginErrorPopup">
        <div class="popup">
            <div class="popup-header">
                <h3 class="popup-title">
                    <i class="fas fa-exclamation-triangle"></i>
                    เข้าสู่ระบบไม่สำเร็จ
                </h3>
                <button class="popup-close" onclick="closePopup('loginErrorPopup')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="popup-content">
                <div class="popup-icon error">
                    <i class="fas fa-times-circle"></i>
                </div>
                <p class="popup-description">
                    ชื่อผู้ใช้งาน หรือ รหัสผ่านไม่ถูกต้อง กรุณาตรวจสอบข้อมูลและลองใหม่อีกครั้ง
                </p>
            </div>
            <div class="popup-buttons">
                <button class="popup-button danger" onclick="closePopup('loginErrorPopup')">
                    ลองใหม่
                </button>
            </div>
        </div>
    </div>

    <!-- Account Locked Popup -->
    <div class="popup-overlay" id="accountLockedPopup">
        <div class="popup">
            <div class="popup-header">
                <h3 class="popup-title">
                    <i class="fas fa-lock"></i>
                    บัญชีถูกล็อค
                </h3>
                <button class="popup-close" onclick="closePopup('accountLockedPopup')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="popup-content">
                <div class="popup-icon warning">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <p class="popup-description">
                    บัญชีของคุณถูกล็อคเนื่องจากพยายามเข้าสู่ระบบผิดหลายครั้ง กรุณาติดต่อผู้ดูแลระบบเพื่อปลดล็อคบัญชี
                </p>
            </div>
            <div class="popup-buttons">
                <button class="popup-button secondary" onclick="closePopup('accountLockedPopup')">
                    ตกลง
                </button>
                <button class="popup-button primary" onclick="contactAdmin()">
                    ติดต่อผู้ดูแล
                </button>
            </div>
        </div>
    </div>

    <!-- Terms & Conditions Popup -->
    <div class="popup-overlay" id="termsPopup">
        <div class="popup">
            <div class="popup-header">
                <h3 class="popup-title">
                    <i class="fas fa-file-contract"></i>
                    เงื่อนไขการใช้งาน
                </h3>
                <button class="popup-close" onclick="closePopup('termsPopup')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="popup-content">
                <div class="terms-content">
                    <h3>1. การยอมรับเงื่อนไข</h3>
                    <p>การใช้งานระบบ Smart Village Management System แสดงว่าคุณยอมรับและตกลงที่จะปฏิบัติตามเงื่อนไขการใช้งานทั้งหมด</p>
                    
                    <h3>2. การใช้งานระบบ</h3>
                    <p>ผู้ใช้งานต้องใช้ระบบเพื่อวัตถุประสงค์ที่ถูกต้องตามกฎหมายเท่านั้น และไม่กระทำการใดๆ ที่อาจเป็นอันตรายต่อระบบ</p>
                    
                    <h3>3. ความรับผิดชอบของผู้ใช้</h3>
                    <ul>
                        <li>รักษาความปลอดภัยของชื่อผู้ใช้และรหัสผ่าน</li>
                        <li>ไม่เปิดเผยข้อมูลส่วนตัวของผู้อื่น</li>
                        <li>ใช้งานระบบด้วยความระมัดระวัง</li>
                        <li>แจ้งผู้ดูแลระบบเมื่อพบปัญหาหรือข้อผิดพลาด</li>
                    </ul>
                    
                    <h3>4. ข้อจำกัดความรับผิดชอบ</h3>
                    <p>ผู้พัฒนาระบบไม่รับผิดชอบต่อความเสียหายที่เกิดจากการใช้งานระบบ ยกเว้นกรณีที่เกิดจากความประมาทเลินเล่ออย่างร้ายแรง</p>
                    
                    <h3>5. การแก้ไขเงื่อนไข</h3>
                    <p>เงื่อนไขการใช้งานอาจมีการแก้ไขเปลี่ยนแปลงได้ โดยจะแจ้งให้ผู้ใช้งานทราบล่วงหน้า</p>
                </div>
            </div>
            <div class="popup-buttons">
                <button class="popup-button secondary" onclick="closePopup('termsPopup')">
                    ปิด
                </button>
                <button class="popup-button success" onclick="acceptTerms()">
                    ยอมรับ
                </button>
            </div>
        </div>
    </div>

    <!-- Privacy Policy Popup -->
    <div class="popup-overlay" id="privacyPopup">
        <div class="popup">
            <div class="popup-header">
                <h3 class="popup-title">
                    <i class="fas fa-shield-alt"></i>
                    นโยบายความเป็นส่วนตัว
                </h3>
                <button class="popup-close" onclick="closePopup('privacyPopup')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="popup-content">
                <div class="terms-content">
                    <h3>1. การเก็บรวบรวมข้อมูล</h3>
                    <p>เราเก็บรวบรวมข้อมูลส่วนบุคคลที่จำเป็นสำหรับการให้บริการระบบจัดการหมู่บ้านอัจฉริยะเท่านั้น</p>
                    
                    <h3>2. ประเภทข้อมูลที่เก็บรวบรวม</h3>
                    <ul>
                        <li>ข้อมูลส่วนตัว (ชื่อ, นามสกุล, อีเมล, เบอร์โทรศัพท์)</li>
                        <li>ข้อมูลการใช้งานระบบ</li>
                        <li>ข้อมูลการเข้าสู่ระบบ</li>
                        <li>ข้อมูลทรัพย์สินและการเงิน (เฉพาะที่เกี่ยวข้อง)</li>
                    </ul>
                    
                    <h3>3. วัตถุประสงค์การใช้ข้อมูล</h3>
                    <ul>
                        <li>การให้บริการระบบจัดการหมู่บ้าน</li>
                        <li>การติดต่อสื่อสารกับผู้ใช้งาน</li>
                        <li>การปรับปรุงและพัฒนาระบบ</li>
                        <li>การรักษาความปลอดภัยของระบบ</li>
                    </ul>
                    
                    <h3>4. การเปิดเผยข้อมูล</h3>
                    <p>เราจะไม่เปิดเผยข้อมูลส่วนบุคคลของคุณให้กับบุคคลที่สาม ยกเว้นกรณีที่ได้รับความยินยอมหรือตามที่กฎหมายกำหนด</p>
                    
                    <h3>5. ความปลอดภัยของข้อมูล</h3>
                    <p>เรามีมาตรการรักษาความปลอดภัยที่เหมาะสมเพื่อป้องกันการเข้าถึง การใช้ หรือการเปิดเผยข้อมูลโดยไม่ได้รับอนุญาต</p>
                    
                    <h3>6. สิทธิของเจ้าของข้อมูล</h3>
                    <p>คุณมีสิทธิในการเข้าถึง แก้ไข หรือลบข้อมูลส่วนบุคคลของคุณ โดยติดต่อผู้ดูแลระบบ</p>
                </div>
            </div>
            <div class="popup-buttons">
                <button class="popup-button secondary" onclick="closePopup('privacyPopup')">
                    ปิด
                </button>
                <button class="popup-button success" onclick="acceptPrivacy()">
                    เข้าใจแล้ว
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Popup -->
    <div class="popup-overlay" id="loadingPopup">
        <div class="popup">
            <div class="popup-content" style="text-align: center; padding: 40px;">
                <div class="loading-spinner"></div>
                <div class="loading-text">กำลังเข้าสู่ระบบ...</div>
            </div>
        </div>
    </div>

    <script>
        // Password Toggle
        document.getElementById('passwordToggle').addEventListener('click', function() {
            const passwordInput = document.getElementById('password');
            const icon = this;
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        });

        // Form Validation
        function validateForm() {
            const username = document.getElementById('username');
            const password = document.getElementById('password');
            const usernameError = document.getElementById('usernameError');
            const passwordError = document.getElementById('passwordError');
            
            let isValid = true;
            
            // Reset errors
            username.classList.remove('error');
            password.classList.remove('error');
            usernameError.classList.remove('show');
            passwordError.classList.remove('show');
            
            // Validate username
            if (!username.value.trim()) {
                username.classList.add('error');
                usernameError.classList.add('show');
                isValid = false;
            }
            
            // Validate password
            if (!password.value.trim()) {
                password.classList.add('error');
                passwordError.classList.add('show');
                isValid = false;
            }
            
            return isValid;
        }

        // Login Form Submit
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!validateForm()) {
                return;
            }
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            // Show loading
            showPopup('loadingPopup');
            
            // Simulate login process
            setTimeout(() => {
                closePopup('loadingPopup');
                
                // Demo login logic with role-based redirect
                if (username === 'superadmin' && password === 'super123') {
                    // Super Admin - redirect to Super Admin Dashboard
                    window.location.href = 'super_admin_dashboard.html';
                } else if (username === 'villageadmin' && password === 'village123') {
                    // Village Admin - redirect to Village Admin Dashboard
                    alert('กำลังพาไปยัง Village Admin Dashboard...');
                    // window.location.href = 'village_admin_dashboard.html';
                } else if (username === 'accounting' && password === 'account123') {
                    // Accounting Admin - redirect to Accounting Dashboard
                    alert('กำลังพาไปยัง Accounting Dashboard...');
                    // window.location.href = 'accounting_dashboard.html';
                } else if (username === 'locked') {
                    // Account locked
                    showPopup('accountLockedPopup');
                } else {
                    // Login error
                    showPopup('loginErrorPopup');
                }
            }, 2000);
        });

        // Popup Functions
        function showPopup(popupId) {
            document.getElementById(popupId).classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closePopup(popupId) {
            document.getElementById(popupId).classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Event Listeners
        document.getElementById('forgotPasswordLink').addEventListener('click', function(e) {
            e.preventDefault();
            showPopup('forgotPasswordPopup');
        });

        document.getElementById('termsLink').addEventListener('click', function(e) {
            e.preventDefault();
            showPopup('termsPopup');
        });

        document.getElementById('privacyLink').addEventListener('click', function(e) {
            e.preventDefault();
            showPopup('privacyPopup');
        });

        // Forgot Password Functions
        function sendResetLink() {
            const email = document.getElementById('resetEmail').value;
            
            if (!email) {
                alert('กรุณากรอกอีเมล');
                return;
            }
            
            if (!isValidEmail(email)) {
                alert('รูปแบบอีเมลไม่ถูกต้อง');
                return;
            }
            
            closePopup('forgotPasswordPopup');
            showPopup('resetSuccessPopup');
        }

        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        function contactAdmin() {
            alert('กรุณาติดต่อผู้ดูแลระบบที่ admin@smartvillage.com หรือ 02-123-4567');
        }

        function acceptTerms() {
            closePopup('termsPopup');
            alert('ขอบคุณที่ยอมรับเงื่อนไขการใช้งาน');
        }

        function acceptPrivacy() {
            closePopup('privacyPopup');
            alert('ขอบคุณที่อ่านนโยบายความเป็นส่วนตัว');
        }

        // Close popup when clicking outside
        document.querySelectorAll('.popup-overlay').forEach(overlay => {
            overlay.addEventListener('click', function(e) {
                if (e.target === this) {
                    closePopup(this.id);
                }
            });
        });

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                // Close any open popup
                document.querySelectorAll('.popup-overlay.active').forEach(popup => {
                    closePopup(popup.id);
                });
            }
        });

        // Real-time validation
        document.getElementById('username').addEventListener('input', function() {
            if (this.classList.contains('error') && this.value.trim()) {
                this.classList.remove('error');
                document.getElementById('usernameError').classList.remove('show');
            }
        });

        document.getElementById('password').addEventListener('input', function() {
            if (this.classList.contains('error') && this.value.trim()) {
                this.classList.remove('error');
                document.getElementById('passwordError').classList.remove('show');
            }
        });
    </script>
</body>
</html>

