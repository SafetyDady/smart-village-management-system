<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Village Admin Dashboard - Smart Village</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Basic Reset & Global Styles */
        :root {
            --primary-color: #1A2B48; /* Navy Blue */
            --secondary-color: #28A745; /* Green */
            --accent-color: #4A90E2; /* Bright Blue */
            --background-color: #F8F9FA; /* Light Grey */
            --card-background: #FFFFFF;
            --text-color: #333333;
            --text-light: #6c757d;
            --border-color: #dee2e6;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
        }

        /* Fixed Header */
        .header {
            background: var(--primary-color);
            color: white;
            height: 70px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .menu-toggle {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            padding: 10px;
            border-radius: 8px;
            transition: background 0.3s ease;
        }

        .menu-toggle:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            background: #28A745;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .logo-text {
            font-size: 18px;
            font-weight: 600;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .super-admin-return {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.3s ease;
            display: none; /* Hidden by default, shown when Super Admin accesses */
        }

        .super-admin-return:hover {
            background: #218838;
        }

        .super-admin-return.show {
            display: block;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .user-info:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #28A745;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
        }

        .user-details {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .user-name {
            font-size: 14px;
            font-weight: 500;
        }

        .user-role {
            font-size: 12px;
            opacity: 0.8;
        }

        /* Sidebar */
        .sidebar {
            background: white;
            width: 280px;
            height: calc(100vh - 70px);
            position: fixed;
            top: 70px;
            left: 0;
            z-index: 999;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
            overflow-y: auto;
        }

        .sidebar.collapsed {
            transform: translateX(-280px);
        }

        .sidebar-menu {
            list-style: none;
            padding: 20px 0;
            margin: 0;
        }

        .sidebar-menu li a {
            display: flex;
            align-items: center;
            padding: 15px 25px;
            color: var(--text-color);
            text-decoration: none;
            gap: 15px;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .sidebar-menu li a:hover, .sidebar-menu li a.active {
            background-color: #F3F4F6;
            border-left: 4px solid var(--primary-color);
            color: var(--primary-color);
        }

        .sidebar-menu li a i {
            width: 20px;
            text-align: center;
            font-size: 16px;
        }

        .menu-text {
            font-size: 14px;
        }

        /* Main Content */
        .main-content {
            margin-left: 280px;
            margin-top: 70px;
            padding: 30px;
            min-height: calc(100vh - 70px);
            transition: margin-left 0.3s ease;
        }

        .main-content.expanded {
            margin-left: 0;
        }

        .page-header {
            margin-bottom: 30px;
        }

        .page-title {
            font-size: 28px;
            font-weight: 600;
            color: #1A2B48;
            margin-bottom: 8px;
        }

        .page-subtitle {
            font-size: 16px;
            color: #6B7280;
        }

        /* Page Content Sections */
        .page-section {
            display: none;
        }
        .page-section.active {
            display: block;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        .stat-card {
            background-color: var(--card-background);
            padding: 25px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .stat-card .icon {
            font-size: 28px;
            padding: 15px;
            border-radius: 50%;
            color: white;
        }
        .stat-card .info h3 {
            margin: 0;
            font-size: 24px;
        }
        .stat-card .info p {
            margin: 5px 0 0;
            color: var(--text-light);
        }

        /* Property Management Styles */
        
        /* Property Header */
        .property-header {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .property-header h1 {
            color: #1A2B48;
            font-size: 24px;
            margin-bottom: 10px;
            margin: 0;
        }

        .property-header p {
            color: #666;
            font-size: 14px;
            margin: 5px 0 0;
        }

        /* Property Toolbar */
        .property-toolbar {
            background: white;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .search-box {
            position: relative;
        }

        .search-box input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            width: 300px;
            font-size: 14px;
        }

        .search-box input:focus {
            outline: none;
            border-color: #1A2B48;
        }

        /* Property Table */
        .property-table-container {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .property-data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        .property-data-table th {
            background: #1A2B48;
            color: white;
            padding: 15px 12px;
            text-align: left;
            font-weight: 500;
            border-bottom: 1px solid #2d4a6b;
        }

        .property-data-table td {
            padding: 12px;
            border-bottom: 1px solid #eee;
        }

        .property-data-table tbody tr:nth-child(even) {
            background: #f8f9fa;
        }

        .property-data-table tbody tr:hover {
            background: #e8f4f8;
        }

        /* Property Pagination */
        .property-pagination {
            background: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .page-info {
            color: #666;
            font-size: 14px;
        }

        /* Action Buttons */
        .property-action-buttons {
            display: flex;
            gap: 5px;
        }

        .btn-property-action {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn-property-view {
            background: #FF9800;
            color: white;
        }

        .btn-property-view:hover {
            background: #F57C00;
        }

        .btn-property-edit {
            background: #F44336;
            color: white;
        }

        .btn-property-edit:hover {
            background: #D32F2F;
        }

        .btn-property-delete {
            background: #4CAF50;
            color: white;
        }

        .btn-property-delete:hover {
            background: #388E3C;
        }

        .property-type {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            text-transform: uppercase;
        }

        /* Property Modal Styles */
        .property-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(2px);
        }

        .property-modal-content {
            background-color: white;
            margin: 2% auto;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease-out;
        }

        .property-modal-small {
            max-width: 500px;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .property-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid #eee;
            background: #f8f9fa;
            border-radius: 12px 12px 0 0;
        }

        .property-modal-title {
            margin: 0;
            font-size: 20px;
            font-weight: 600;
            color: #1A2B48;
        }

        .property-modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s;
        }

        .property-modal-close:hover {
            background: #f0f0f0;
            color: #333;
        }

        .property-modal-body {
            padding: 24px;
        }

        .property-modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            padding: 20px 24px;
            border-top: 1px solid #eee;
            background: #f8f9fa;
            border-radius: 0 0 12px 12px;
        }

        /* Property Form Styles */
        .property-form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .property-form-group {
            display: flex;
            flex-direction: column;
        }

        .property-form-full-width {
            grid-column: 1 / -1;
        }

        .property-form-label {
            font-weight: 500;
            margin-bottom: 6px;
            color: #333;
            font-size: 14px;
        }

        .property-form-label.required::after {
            content: ' *';
            color: #e74c3c;
        }

        .property-form-input,
        .property-form-select,
        .property-form-textarea {
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        .property-form-input:focus,
        .property-form-select:focus,
        .property-form-textarea:focus {
            outline: none;
            border-color: #1A2B48;
            box-shadow: 0 0 0 3px rgba(26, 43, 72, 0.1);
        }

        .property-form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .property-form-input:invalid {
            border-color: #e74c3c;
        }

        .property-form-input:invalid:focus {
            box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.1);
        }

        /* Button Styles */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: #1A2B48;
            color: white;
        }

        .btn-primary:hover {
            background: #0f1a2e;
        }

        .btn-cancel {
            background: #6c757d;
            color: white;
        }

        .btn-cancel:hover {
            background: #5a6268;
        }

        .btn-save {
            background: #28a745;
            color: white;
        }

        .btn-save:hover {
            background: #218838;
        }

        .btn-delete-confirm {
            background: #dc3545;
            color: white;
        }

        .btn-delete-confirm:hover {
            background: #c82333;
        }

        .btn-outline {
            background: transparent;
            color: #1A2B48;
            border: 1px solid #1A2B48;
        }

        .btn-outline:hover {
            background: #1A2B48;
            color: white;
        }

        /* Status Badge Styles */
        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            text-transform: uppercase;
        }

        .status-badge.occupied {
            background: #d4edda;
            color: #155724;
        }

        .status-badge.vacant {
            background: #f8d7da;
            color: #721c24;
        }

        .status-badge.for-rent {
            background: #d1ecf1;
            color: #0c5460;
        }

        .status-badge.maintenance {
            background: #fff3cd;
            color: #856404;
        }

        /* Property Type Badge Styles */
        .property-type.single-house {
            background: #e3f2fd;
            color: #1976d2;
        }

        .property-type.townhouse {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .property-type.condo {
            background: #e8f5e8;
            color: #388e3c;
        }

        /* Person Info Styles */
        .person-info {
            display: flex;
            flex-direction: column;
        }

        .person-info strong {
            font-weight: 500;
            margin-bottom: 2px;
        }

        .person-info small {
            color: #666;
            font-size: 12px;
        }

        .text-muted {
            color: #6c757d;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .property-form-grid {
                grid-template-columns: 1fr;
            }
            
            .property-modal-content {
                margin: 5% auto;
                width: 95%;
            }
            
            .property-modal-header,
            .property-modal-body,
            .property-modal-footer {
                padding: 16px;
            }
            
            .property-modal-footer {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }

        .property-type.single-house {
            background: #E3F2FD;
            color: #1976D2;
        }

        .property-type.townhouse {
            background: #F3E5F5;
            color: #7B1FA2;
        }

        .property-type.condo {
            background: #E8F5E8;
            color: #388E3C;
        }

        .person-info {
            line-height: 1.4;
        }

        .person-info strong {
            color: var(--text-color);
        }

        .person-info small {
            color: var(--text-light);
            font-size: 11px;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            text-transform: uppercase;
        }

        .status-badge.occupied {
            background: #E8F5E8;
            color: #2E7D32;
        }

        .status-badge.vacant {
            background: #FFF3E0;
            color: #F57C00;
        }

        .status-badge.for-rent {
            background: #E3F2FD;
            color: #1976D2;
        }

        .status-badge.maintenance {
            background: #FFEBEE;
            color: #C62828;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 0;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            padding: 24px 30px 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-color);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            color: var(--text-light);
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            background: var(--background-color);
            color: var(--text-color);
        }

        .modal-body {
            padding: 30px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-color);
        }

        .form-label.required::after {
            content: " *";
            color: #dc3545;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.2s ease;
            background: white;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .modal-footer {
            padding: 20px 30px 30px;
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }

        .btn-cancel {
            background: var(--background-color);
            color: var(--text-color);
            border: 2px solid var(--border-color);
        }

        .btn-cancel:hover {
            background: #e9ecef;
            border-color: #adb5bd;
        }

        .btn-save {
            background: var(--secondary-color);
            color: white;
            border: 2px solid var(--secondary-color);
        }

        .btn-save:hover {
            background: #218838;
            border-color: #1e7e34;
        }

        .btn-delete-confirm {
            background: #dc3545;
            color: white;
            border: 2px solid #dc3545;
        }

        .btn-delete-confirm:hover {
            background: #c82333;
            border-color: #bd2130;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                width: 95%;
                margin: 20px;
            }
        }

        /* Property Management Specific Styles */
        .properties-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 24px;
            margin-bottom: 30px;
        }

        .property-card {
            background: var(--card-background);
            border-radius: 12px;
            box-shadow: var(--shadow);
            padding: 24px;
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
        }

        .property-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        }

        .property-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .property-number {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
        }

        .property-actions {
            display: flex;
            gap: 8px;
        }

        .property-type-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 20px;
        }

        .property-type-badge.single-house {
            background: #e3f2fd;
            color: #1976d2;
        }

        .property-type-badge.townhouse {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .property-type-badge.condo {
            background: #e8f5e8;
            color: #388e3c;
        }

        .property-details {
            margin-bottom: 20px;
        }

        .property-size,
        .property-owner,
        .property-tenant {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 12px;
            padding: 8px 0;
        }

        .property-size i,
        .property-owner i,
        .property-tenant i {
            color: var(--text-light);
            font-size: 16px;
            width: 20px;
            margin-top: 2px;
        }

        .property-size span {
            color: var(--text-color);
            font-weight: 500;
        }

        .property-owner div,
        .property-tenant div {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .property-owner strong,
        .property-tenant strong {
            color: var(--text-color);
            font-weight: 600;
            font-size: 14px;
        }

        .property-owner small,
        .property-tenant small {
            color: var(--text-light);
            font-size: 12px;
        }

        .property-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 16px;
            border-top: 1px solid var(--border-color);
        }

        .property-rent {
            font-size: 18px;
            font-weight: 700;
            color: var(--secondary-color);
        }

        .property-rent.text-muted {
            color: var(--text-light);
            font-weight: 500;
        }

        .property-type {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
            text-transform: uppercase;
        }

        .property-type.single-house {
            background: #e3f2fd;
            color: #1976d2;
        }

        .property-type.townhouse {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .property-type.condo {
            background: #e8f5e8;
            color: #388e3c;
        }

        .person-info {
            line-height: 1.4;
        }

        .person-info strong {
            display: block;
            margin-bottom: 2px;
        }

        .person-info small {
            color: var(--text-light);
            font-size: 12px;
        }

        .status-badge {
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-badge.occupied {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status-badge.vacant {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .status-badge.for-rent {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .status-badge.maintenance {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .text-muted {
            color: var(--text-light);
            font-style: italic;
        }

        /* Property Details Modal Styles */
        .property-details {
            padding: 20px 0;
        }

        .detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .detail-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .detail-item.full-width {
            grid-column: 1 / -1;
        }

        .detail-item label {
            font-weight: 600;
            color: var(--text-light);
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .detail-item span {
            font-size: 16px;
            color: var(--text-color);
        }

        .detail-item span strong {
            font-weight: 600;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 8px;
            justify-content: center;
        }

        .btn-icon {
            width: 36px;
            height: 36px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            font-size: 14px;
        }

        .btn-icon.btn-view {
            background: #e3f2fd;
            color: #1976d2;
        }

        .btn-icon.btn-view:hover {
            background: #bbdefb;
            transform: translateY(-2px);
        }

        .btn-icon.btn-edit {
            background: #fff3e0;
            color: #f57c00;
        }

        .btn-icon.btn-edit:hover {
            background: #ffe0b2;
            transform: translateY(-2px);
        }

        .btn-icon.btn-delete {
            background: #ffebee;
            color: #d32f2f;
        }

        .btn-icon.btn-delete:hover {
            background: #ffcdd2;
            transform: translateY(-2px);
        }

        /* Search and Filter Styles */
        .search-filter-group {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .search-box {
            position: relative;
            min-width: 300px;
        }

        .search-box i {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
            font-size: 14px;
        }

        .search-box input {
            padding-left: 40px;
        }

        .filter-select {
            padding: 10px 16px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: white;
            color: var(--text-color);
            font-size: 14px;
            cursor: pointer;
            transition: border-color 0.2s ease;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        /* Responsive adjustments for Property Management */
        @media (max-width: 1200px) {
            .properties-grid {
                grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            }
            
            .search-filter-group {
                flex-wrap: wrap;
            }
            
            .search-box {
                min-width: 250px;
            }
        }

        @media (max-width: 768px) {
            .properties-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .property-card {
                padding: 20px;
            }
            
            .property-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }
            
            .property-actions {
                align-self: flex-end;
            }
            
            .property-footer {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }
            
            .detail-grid {
                grid-template-columns: 1fr;
            }
            
            .search-filter-group {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-box {
                min-width: auto;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .btn-icon {
                width: 100%;
                height: 40px;
            }
        }

    </style>
</head>
<body>
    <!-- Fixed Header -->
    <div class="header">
        <div class="header-left">
            <button class="menu-toggle" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
            </button>
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-home"></i>
                </div>
                <div class="logo-text">Smart Village</div>
            </div>
        </div>
        <div class="header-right">
            <button class="super-admin-return" id="superAdminReturn" onclick="returnToSuperAdmin()">
                <i class="fas fa-arrow-left"></i> กลับไป Super Admin Dashboard
            </button>
            <div class="user-info">
                <div class="user-avatar">VA</div>
                <div class="user-details">
                    <div class="user-name">Village Admin</div>
                    <div class="user-role">Baan Suan Sawan</div>
                </div>
                <i class="fas fa-chevron-down" style="font-size: 12px; opacity: 0.7;"></i>
            </div>
        </div>
    </div>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <ul class="sidebar-menu">
            <li><a href="#dashboard" class="active"><i class="fas fa-tachometer-alt"></i><span class="menu-text">Dashboard</span></a></li>
            <li><a href="#resident-management"><i class="fas fa-users"></i><span class="menu-text">Resident Management</span></a></li>
            <li><a href="#property-management"><i class="fas fa-home"></i><span class="menu-text">Property Management</span></a></li>
            <li><a href="#access-control"><i class="fas fa-shield-alt"></i><span class="menu-text">Access Control</span></a></li>
            <li><a href="#reports-analytics"><i class="fas fa-chart-line"></i><span class="menu-text">Reports & Analytics</span></a></li>
            <li><a href="#accounting-dashboard"><i class="fas fa-file-invoice-dollar"></i><span class="menu-text">Accounting Dashboard</span></a></li>
            <li><a href="#profile-settings"><i class="fas fa-user-cog"></i><span class="menu-text">Profile Settings</span></a></li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Dashboard Section -->
        <div id="dashboard" class="page-section active">
            <div class="page-header">
                <h1 class="page-title">Dashboard</h1>
                <p class="page-subtitle">ภาพรวมการจัดการหมู่บ้าน Baan Suan Sawan</p>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="icon" style="background-color: #4A90E2;"><i class="fas fa-user-friends"></i></div>
                    <div class="info">
                        <h3>1,250</h3>
                        <p>Total Residents</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="icon" style="background-color: #50E3C2;"><i class="fas fa-house-user"></i></div>
                    <div class="info">
                        <h3>450</h3>
                        <p>Total Properties</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="icon" style="background-color: #F5A623;"><i class="fas fa-car"></i></div>
                    <div class="info">
                        <h3>312</h3>
                        <p>Entries Today</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="icon" style="background-color: #BD10E0;"><i class="fas fa-user-plus"></i></div>
                    <div class="info">
                        <h3>12</h3>
                        <p>Visitors Today</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Other sections -->
        <div id="resident-management" class="page-section">
            <div class="page-header">
                <h1 class="page-title">Resident Management</h1>
                <p class="page-subtitle">จัดการข้อมูลผู้อยู่อาศัยและกำหนดสิทธิ์การเข้าถึง</p>
            </div>
            <!-- Content for resident management -->
        </div>
            <!-- Property Management Section -->
            <div id="property-management" class="page-section">
                <!-- Header -->
                <div class="property-header">
                    <h1>Property Management</h1>
                    <p>จัดการทรัพย์สินและบ้านเลขที่ในหมู่บ้าน</p>
                </div>

                <!-- Toolbar -->
                <div class="property-toolbar">
                    <button class="btn btn-primary" onclick="openAddPropertyModal()">
                        + เพิ่มทรัพย์สินใหม่
                    </button>
                    <div class="search-box">
                        <input type="text" id="propertySearchInput" placeholder="ค้นหาบ้านเลขที่, เจ้าของ, หรือผู้เช่า..." onkeyup="searchProperties()">
                    </div>
                </div>

                <!-- Table -->
                <div class="property-table-container">
                    <table class="property-data-table" id="propertiesTable">
                        <thead>
                            <tr>
                                <th style="width: 60px;">ลำดับ</th>
                                <th style="width: 120px;">บ้านเลขที่</th>
                                <th style="width: 100px;">ประเภท</th>
                                <th style="width: 180px;">เจ้าของ</th>
                                <th style="width: 180px;">ผู้เช่า/ผู้อยู่อาศัย</th>
                                <th style="width: 120px;">สถานะ</th>
                                <th style="width: 100px;">ค่าเช่า/เดือน</th>
                                <th style="width: 150px;">การดำเนินการ</th>
                            </tr>
                        </thead>
                        <tbody id="propertiesTableBody">
                            <!-- Data will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="property-pagination">
                    <button class="btn btn-outline" onclick="previousPage()">« ก่อนหน้า</button>
                    <span class="page-info" id="pageInfo">หน้า 1 จาก 1 (5 รายการ)</span>
                    <button class="btn btn-outline" onclick="nextPage()">ถัดไป »</button>
                </div>
            </div>

            <!-- Add/Edit Property Modal -->
            <div id="propertyModal" class="property-modal">
                <div class="property-modal-content">
                    <div class="property-modal-header">
                        <h2 class="property-modal-title" id="propertyModalTitle">เพิ่มทรัพย์สินใหม่</h2>
                        <button class="property-modal-close" onclick="closePropertyModal()">&times;</button>
                    </div>
                    <div class="property-modal-body">
                        <form id="propertyForm">
                            <div class="property-form-grid">
                                <div class="property-form-group">
                                    <label class="property-form-label required">บ้านเลขที่</label>
                                    <input type="text" id="propertyNumber" class="property-form-input" placeholder="เช่น 123/45" required>
                                </div>
                                <div class="property-form-group">
                                    <label class="property-form-label required">ประเภททรัพย์สิน</label>
                                    <select id="propertyType" class="property-form-select" required>
                                        <option value="">เลือกประเภท</option>
                                        <option value="single-house">บ้านเดี่ยว</option>
                                        <option value="townhouse">ทาวน์เฮาส์</option>
                                        <option value="condo">คอนโดมิเนียม</option>
                                    </select>
                                </div>
                                <div class="property-form-group">
                                    <label class="property-form-label">ชื่อเจ้าของ</label>
                                    <input type="text" id="ownerName" class="property-form-input" placeholder="นายสมชาย ใจดี">
                                </div>
                                <div class="property-form-group">
                                    <label class="property-form-label">เบอร์โทรเจ้าของ</label>
                                    <input type="tel" id="ownerPhone" class="property-form-input" placeholder="081-234-5678">
                                </div>
                                <div class="property-form-group">
                                    <label class="property-form-label">ชื่อผู้เช่า/ผู้อยู่อาศัย</label>
                                    <input type="text" id="tenantName" class="property-form-input" placeholder="นางสาวมาลี สวยงาม">
                                </div>
                                <div class="property-form-group">
                                    <label class="property-form-label">เบอร์โทรผู้เช่า</label>
                                    <input type="tel" id="tenantPhone" class="property-form-input" placeholder="089-876-5432">
                                </div>
                                <div class="property-form-group">
                                    <label class="property-form-label required">สถานะ</label>
                                    <select id="propertyStatus" class="property-form-select" required>
                                        <option value="">เลือกสถานะ</option>
                                        <option value="occupied">มีผู้อยู่อาศัย</option>
                                        <option value="vacant">ว่าง</option>
                                        <option value="for-rent">ให้เช่า</option>
                                        <option value="maintenance">ปรับปรุง</option>
                                    </select>
                                </div>
                                <div class="property-form-group">
                                    <label class="property-form-label">ค่าเช่า/เดือน (บาท)</label>
                                    <input type="number" id="rentAmount" class="property-form-input" placeholder="15000">
                                </div>
                                <div class="property-form-group property-form-full-width">
                                    <label class="property-form-label">หมายเหตุ</label>
                                    <textarea id="propertyNotes" class="property-form-textarea" placeholder="ข้อมูลเพิ่มเติม..."></textarea>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="property-modal-footer">
                        <button type="button" class="btn btn-cancel" onclick="closePropertyModal()">ยกเลิก</button>
                        <button type="button" class="btn btn-save" onclick="saveProperty()">บันทึก</button>
                    </div>
                </div>
            </div>

            <!-- Delete Confirmation Modal -->
            <div id="deletePropertyModal" class="property-modal">
                <div class="property-modal-content property-modal-small">
                    <div class="property-modal-header">
                        <h2 class="property-modal-title">ยืนยันการลบ</h2>
                        <button class="property-modal-close" onclick="closeDeletePropertyModal()">&times;</button>
                    </div>
                    <div class="property-modal-body">
                        <p>คุณแน่ใจหรือไม่ที่จะลบทรัพย์สิน <strong id="deletePropertyName"></strong>?</p>
                        <p style="color: #666; font-size: 14px; margin-top: 10px;">การดำเนินการนี้ไม่สามารถยกเลิกได้</p>
                    </div>
                    <div class="property-modal-footer">
                        <button type="button" class="btn btn-cancel" onclick="closeDeletePropertyModal()">ยกเลิก</button>
                        <button type="button" class="btn btn-delete-confirm" onclick="confirmDeleteProperty()">ลบทรัพย์สิน</button>
                    </div>
                </div>
            </div>
        
        <div id="access-control" class="page-section">
            <div class="page-header">
                <h1 class="page-title">Access Control</h1>
                <p class="page-subtitle">จัดการการเข้า-ออกหมู่บ้านและระบบรักษาความปลอดภัย</p>
            </div>
            <!-- Content for access control -->
        </div>
        
        <div id="reports-analytics" class="page-section">
            <div class="page-header">
                <h1 class="page-title">Reports & Analytics</h1>
                <p class="page-subtitle">รายงานและสถิติการจัดการหมู่บ้าน</p>
            </div>
            <!-- Content for reports & analytics -->
        </div>
        
        <div id="accounting-dashboard" class="page-section">
            <div class="page-header">
                <h1 class="page-title">Accounting Dashboard</h1>
                <p class="page-subtitle">เข้าถึงข้อมูลการเงินและบัญชีของหมู่บ้าน</p>
            </div>
            <!-- Content for accounting dashboard access -->
        </div>
        
        <div id="profile-settings" class="page-section">
            <div class="page-header">
                <h1 class="page-title">Profile Settings</h1>
                <p class="page-subtitle">จัดการข้อมูลส่วนตัวและการตั้งค่าบัญชี</p>
            </div>
            <!-- Content for profile settings -->
        </div>
    </div>

    <!-- Property Management Modals -->
    <!-- Add/Edit Property Modal -->
    <div id="propertyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="propertyModalTitle">
                    <i class="fas fa-home"></i> เพิ่มทรัพย์สินใหม่
                </h2>
                <button class="modal-close" onclick="closePropertyModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="propertyForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label required">บ้านเลขที่</label>
                            <input type="text" id="propertyNumber" class="form-input" placeholder="เช่น 123/45" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label required">ประเภททรัพย์สิน</label>
                            <select id="propertyType" class="form-select" required>
                                <option value="">เลือกประเภท</option>
                                <option value="single-house">บ้านเดี่ยว</option>
                                <option value="townhouse">ทาวน์เฮาส์</option>
                                <option value="condo">คอนโดมิเนียม</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label required">ขนาดพื้นที่ (ตร.ม.)</label>
                            <input type="number" id="propertySize" class="form-input" placeholder="120" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">จำนวนห้องนอน</label>
                            <input type="number" id="bedrooms" class="form-input" placeholder="3">
                        </div>
                        <div class="form-group">
                            <label class="form-label">จำนวนห้องน้ำ</label>
                            <input type="number" id="bathrooms" class="form-input" placeholder="2">
                        </div>
                        <div class="form-group">
                            <label class="form-label required">สถานะ</label>
                            <select id="propertyStatus" class="form-select" required>
                                <option value="">เลือกสถานะ</option>
                                <option value="occupied">มีผู้อยู่อาศัย</option>
                                <option value="vacant">ว่าง</option>
                                <option value="for-rent">ให้เช่า</option>
                                <option value="maintenance">ปรับปรุง</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ชื่อเจ้าของ</label>
                            <input type="text" id="ownerName" class="form-input" placeholder="นายสมชาย ใจดี">
                        </div>
                        <div class="form-group">
                            <label class="form-label">เบอร์โทรเจ้าของ</label>
                            <input type="tel" id="ownerPhone" class="form-input" placeholder="081-234-5678">
                        </div>
                        <div class="form-group">
                            <label class="form-label">ชื่อผู้เช่า/ผู้อยู่อาศัย</label>
                            <input type="text" id="tenantName" class="form-input" placeholder="นางสาวมาลี สวยงาม">
                        </div>
                        <div class="form-group">
                            <label class="form-label">เบอร์โทรผู้เช่า</label>
                            <input type="tel" id="tenantPhone" class="form-input" placeholder="089-876-5432">
                        </div>
                        <div class="form-group">
                            <label class="form-label">ค่าเช่า/เดือน (บาท)</label>
                            <input type="number" id="rentAmount" class="form-input" placeholder="15000">
                        </div>
                        <div class="form-group full-width">
                            <label class="form-label">หมายเหตุ</label>
                            <textarea id="propertyNotes" class="form-textarea" placeholder="ข้อมูลเพิ่มเติม..."></textarea>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-cancel" onclick="closePropertyModal()">ยกเลิก</button>
                <button type="button" class="btn btn-save" onclick="saveProperty()">บันทึก</button>
            </div>
        </div>
    </div>

    <!-- View Property Modal -->
    <div id="viewPropertyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-eye"></i> รายละเอียดทรัพย์สิน
                </h2>
                <button class="modal-close" onclick="closeViewPropertyModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="propertyDetails">
                    <!-- Property details will be populated here -->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-cancel" onclick="closeViewPropertyModal()">ปิด</button>
                <button type="button" class="btn btn-primary" onclick="editPropertyFromView()">แก้ไข</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deletePropertyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-exclamation-triangle"></i> ยืนยันการลบ
                </h2>
                <button class="modal-close" onclick="closeDeletePropertyModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p>คุณแน่ใจหรือไม่ที่จะลบทรัพย์สิน <strong id="deletePropertyName"></strong>?</p>
                <p class="text-muted">การดำเนินการนี้ไม่สามารถยกเลิกได้</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-cancel" onclick="closeDeletePropertyModal()">ยกเลิก</button>
                <button type="button" class="btn btn-delete-confirm" onclick="confirmDeleteProperty()">ลบทรัพย์สิน</button>
            </div>
        </div>
    </div>

    <script>
        // Check if accessed by Super Admin (you can modify this logic based on your authentication system)
        function checkSuperAdminAccess() {
            // This is a simple example - in real implementation, check session/token
            const urlParams = new URLSearchParams(window.location.search);
            const fromSuperAdmin = urlParams.get('from') === 'superadmin';
            
            if (fromSuperAdmin) {
                document.getElementById('superAdminReturn').classList.add('show');
            }
        }

        // Return to Super Admin Dashboard
        function returnToSuperAdmin() {
            window.location.href = 'super_admin_dashboard.html';
        }

        // Toggle Sidebar
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            
            sidebar.classList.toggle('collapsed');
            mainContent.classList.toggle('expanded');
        }

        // Property Management Functions
        let properties = [
            {
                id: 1,
                number: '123/45',
                type: 'single-house',
                size: 120,
                bedrooms: 3,
                bathrooms: 2,
                status: 'occupied',
                ownerName: 'นายสมชาย ใจดี',
                ownerPhone: '081-234-5678',
                tenantName: 'นางสาวมาลี สวยงาม',
                tenantPhone: '089-876-5432',
                rentAmount: 15000,
                notes: ''
            },
            {
                id: 2,
                number: '124/12',
                type: 'townhouse',
                size: 95,
                bedrooms: 2,
                bathrooms: 2,
                status: 'for-rent',
                ownerName: 'นายประยุทธ์ มั่งมี',
                ownerPhone: '082-345-6789',
                tenantName: '',
                tenantPhone: '',
                rentAmount: 12000,
                notes: ''
            },
            {
                id: 3,
                number: '125/8',
                type: 'condo',
                size: 65,
                bedrooms: 1,
                bathrooms: 1,
                status: 'occupied',
                ownerName: 'นางวิไล สุขใส',
                ownerPhone: '083-456-7890',
                tenantName: 'นายอนุชา เก่งกาจ',
                tenantPhone: '084-567-8901',
                rentAmount: 8500,
                notes: ''
            },
            {
                id: 4,
                number: '126/33',
                type: 'single-house',
                size: 150,
                bedrooms: 4,
                bathrooms: 3,
                status: 'maintenance',
                ownerName: 'นายสุรชัย ร่ำรวย',
                ownerPhone: '085-678-9012',
                tenantName: '',
                tenantPhone: '',
                rentAmount: 0,
                notes: 'อยู่ระหว่างปรับปรุงห้องครัว'
            },
            {
                id: 5,
                number: '127/15',
                type: 'townhouse',
                size: 85,
                bedrooms: 2,
                bathrooms: 1,
                status: 'vacant',
                ownerName: 'นางสาวปิยะดา ใสสะอาด',
                ownerPhone: '086-789-0123',
                tenantName: '',
                tenantPhone: '',
                rentAmount: 0,
                notes: ''
            }
        ];

        let currentPropertyId = null;
        let nextPropertyId = 6;

        // Property Type Labels
        const propertyTypeLabels = {
            'single-house': 'บ้านเดี่ยว',
            'townhouse': 'ทาวน์เฮาส์',
            'condo': 'คอนโดมิเนียม'
        };

        // Status Labels
        const statusLabels = {
            'occupied': 'มีผู้อยู่อาศัย',
            'vacant': 'ว่าง',
            'for-rent': 'ให้เช่า',
            'maintenance': 'ปรับปรุง'
        };

        // Open Add Property Modal
        function openAddPropertyModal() {
            currentPropertyId = null;
            document.getElementById('propertyModalTitle').innerHTML = '<i class="fas fa-home"></i> เพิ่มทรัพย์สินใหม่';
            document.getElementById('propertyForm').reset();
            document.getElementById('propertyModal').style.display = 'flex';
        }

        // Close Property Modal
        function closePropertyModal() {
            document.getElementById('propertyModal').style.display = 'none';
            currentPropertyId = null;
        }

        // View Property Details
        function viewProperty(id) {
            const property = properties.find(p => p.id === id);
            if (!property) return;

            const detailsHtml = `
                <div class="property-details">
                    <div class="detail-grid">
                        <div class="detail-item">
                            <label>บ้านเลขที่:</label>
                            <span><strong>${property.number}</strong></span>
                        </div>
                        <div class="detail-item">
                            <label>ประเภท:</label>
                            <span>${propertyTypeLabels[property.type]}</span>
                        </div>
                        <div class="detail-item">
                            <label>ขนาดพื้นที่:</label>
                            <span>${property.size} ตร.ม.</span>
                        </div>
                        <div class="detail-item">
                            <label>จำนวนห้อง:</label>
                            <span>${property.bedrooms} ห้องนอน, ${property.bathrooms} ห้องน้ำ</span>
                        </div>
                        <div class="detail-item">
                            <label>สถานะ:</label>
                            <span class="status-badge ${property.status}">${statusLabels[property.status]}</span>
                        </div>
                        <div class="detail-item">
                            <label>เจ้าของ:</label>
                            <span>${property.ownerName || '-'}</span>
                        </div>
                        <div class="detail-item">
                            <label>เบอร์โทรเจ้าของ:</label>
                            <span>${property.ownerPhone || '-'}</span>
                        </div>
                        <div class="detail-item">
                            <label>ผู้เช่า/ผู้อยู่อาศัย:</label>
                            <span>${property.tenantName || '-'}</span>
                        </div>
                        <div class="detail-item">
                            <label>เบอร์โทรผู้เช่า:</label>
                            <span>${property.tenantPhone || '-'}</span>
                        </div>
                        <div class="detail-item">
                            <label>ค่าเช่า/เดือน:</label>
                            <span>${property.rentAmount > 0 ? '฿' + property.rentAmount.toLocaleString() : '-'}</span>
                        </div>
                        ${property.notes ? `
                        <div class="detail-item full-width">
                            <label>หมายเหตุ:</label>
                            <span>${property.notes}</span>
                        </div>
                        ` : ''}
                    </div>
                </div>
            `;

            document.getElementById('propertyDetails').innerHTML = detailsHtml;
            currentPropertyId = id;
            document.getElementById('viewPropertyModal').style.display = 'flex';
        }

        // Close View Property Modal
        function closeViewPropertyModal() {
            document.getElementById('viewPropertyModal').style.display = 'none';
            currentPropertyId = null;
        }

        // Edit Property from View Modal
        function editPropertyFromView() {
            closeViewPropertyModal();
            editProperty(currentPropertyId);
        }

        // Edit Property
        function editProperty(id) {
            const property = properties.find(p => p.id === id);
            if (!property) return;

            currentPropertyId = id;
            document.getElementById('propertyModalTitle').innerHTML = '<i class="fas fa-edit"></i> แก้ไขทรัพย์สิน';
            
            // Populate form with existing data
            document.getElementById('propertyNumber').value = property.number;
            document.getElementById('propertyType').value = property.type;
            document.getElementById('propertySize').value = property.size;
            document.getElementById('bedrooms').value = property.bedrooms;
            document.getElementById('bathrooms').value = property.bathrooms;
            document.getElementById('propertyStatus').value = property.status;
            document.getElementById('ownerName').value = property.ownerName;
            document.getElementById('ownerPhone').value = property.ownerPhone;
            document.getElementById('tenantName').value = property.tenantName;
            document.getElementById('tenantPhone').value = property.tenantPhone;
            document.getElementById('rentAmount').value = property.rentAmount > 0 ? property.rentAmount : '';
            document.getElementById('propertyNotes').value = property.notes;

            document.getElementById('propertyModal').style.display = 'flex';
        }

        // Save Property
        function saveProperty() {
            const form = document.getElementById('propertyForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            const propertyData = {
                number: document.getElementById('propertyNumber').value,
                type: document.getElementById('propertyType').value,
                size: parseInt(document.getElementById('propertySize').value),
                bedrooms: parseInt(document.getElementById('bedrooms').value) || 0,
                bathrooms: parseInt(document.getElementById('bathrooms').value) || 0,
                status: document.getElementById('propertyStatus').value,
                ownerName: document.getElementById('ownerName').value,
                ownerPhone: document.getElementById('ownerPhone').value,
                tenantName: document.getElementById('tenantName').value,
                tenantPhone: document.getElementById('tenantPhone').value,
                rentAmount: parseInt(document.getElementById('rentAmount').value) || 0,
                notes: document.getElementById('propertyNotes').value
            };

            if (currentPropertyId) {
                // Update existing property
                const index = properties.findIndex(p => p.id === currentPropertyId);
                if (index !== -1) {
                    properties[index] = { ...properties[index], ...propertyData };
                }
            } else {
                // Add new property
                propertyData.id = nextPropertyId++;
                properties.push(propertyData);
            }

            renderPropertiesTable();
            closePropertyModal();
            
            // Show success message (you can implement a toast notification here)
            alert(currentPropertyId ? 'แก้ไขทรัพย์สินเรียบร้อยแล้ว' : 'เพิ่มทรัพย์สินใหม่เรียบร้อยแล้ว');
        }

        // Delete Property
        function deleteProperty(id) {
            const property = properties.find(p => p.id === id);
            if (!property) return;

            currentPropertyId = id;
            document.getElementById('deletePropertyName').textContent = property.number;
            document.getElementById('deletePropertyModal').style.display = 'flex';
        }

        // Close Delete Property Modal
        function closeDeletePropertyModal() {
            document.getElementById('deletePropertyModal').style.display = 'none';
            currentPropertyId = null;
        }

        // Confirm Delete Property
        function confirmDeleteProperty() {
            if (currentPropertyId) {
                properties = properties.filter(p => p.id !== currentPropertyId);
                renderPropertiesTable();
                closeDeletePropertyModal();
                alert('ลบทรัพย์สินเรียบร้อยแล้ว');
            }
        }

        // Filter Properties
        function filterProperties() {
            const searchTerm = document.getElementById('propertySearch').value.toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value;
            const typeFilter = document.getElementById('typeFilter').value;

            const filteredProperties = properties.filter(property => {
                const matchesSearch = !searchTerm || 
                    property.number.toLowerCase().includes(searchTerm) ||
                    property.ownerName.toLowerCase().includes(searchTerm) ||
                    property.tenantName.toLowerCase().includes(searchTerm);
                
                const matchesStatus = !statusFilter || property.status === statusFilter;
                const matchesType = !typeFilter || property.type === typeFilter;

                return matchesSearch && matchesStatus && matchesType;
            });

            renderPropertiesTable(filteredProperties);
        }

        // Render Properties Table
        function renderPropertiesTable(propertiesToRender = properties) {
            const tbody = document.getElementById('propertiesTableBody');
            
            if (propertiesToRender.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" style="text-align: center; padding: 40px; color: var(--text-light);">
                            <i class="fas fa-home" style="font-size: 48px; margin-bottom: 16px; opacity: 0.3;"></i><br>
                            ไม่พบข้อมูลทรัพย์สิน
                        </td>
                    </tr>
                `;
                return;
            }

            // Sort properties by house number (ascending)
            const sortedProperties = [...propertiesToRender].sort((a, b) => {
                // Extract numeric part from house number for proper sorting
                const getNumericPart = (houseNumber) => {
                    const match = houseNumber.match(/(\d+)/);
                    return match ? parseInt(match[1]) : 0;
                };
                return getNumericPart(a.number) - getNumericPart(b.number);
            });

            tbody.innerHTML = sortedProperties.map(property => `
                <tr>
                    <td><strong>${property.number}</strong></td>
                    <td><span class="property-type ${property.type}">${propertyTypeLabels[property.type]}</span></td>
                    <td>${property.size} ตร.ม.<br><small>${property.bedrooms} ห้องนอน, ${property.bathrooms} ห้องน้ำ</small></td>
                    <td>
                        ${property.ownerName ? `
                            <div class="person-info">
                                <strong>${property.ownerName}</strong><br>
                                <small>${property.ownerPhone}</small>
                            </div>
                        ` : '<span class="text-muted">-</span>'}
                    </td>
                    <td>
                        ${property.tenantName ? `
                            <div class="person-info">
                                <strong>${property.tenantName}</strong><br>
                                <small>${property.tenantPhone}</small>
                            </div>
                        ` : '<span class="text-muted">-</span>'}
                    </td>
                    <td><span class="status-badge ${property.status}">${statusLabels[property.status]}</span></td>
                    <td>${property.rentAmount > 0 ? '<strong>฿' + property.rentAmount.toLocaleString() + '</strong>' : '<span class="text-muted">-</span>'}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon btn-edit" onclick="editProperty(${property.id})" title="แก้ไข">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-icon btn-delete" onclick="deleteProperty(${property.id})" title="ลบ">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        // Render Properties Grid (keep for backward compatibility)
        function renderPropertiesGrid(propertiesToRender = properties) {
            // Use the table rendering instead
            renderPropertiesTable(propertiesToRender);
        }

        // New Property Management System
        function initializePropertyManagement() {
            // Override properties with new data structure
            window.properties = [
                {
                    id: 1,
                    number: '123/45',
                    type: 'single-house',
                    owner: { name: 'นายสมชาย ใจดี', phone: '081-234-5678' },
                    tenant: { name: 'นางสาวมาลี สวยงาม', phone: '089-876-5432' },
                    status: 'occupied',
                    rent: 15000,
                    notes: ''
                },
                {
                    id: 2,
                    number: '124/12',
                    type: 'townhouse',
                    owner: { name: 'นายประยุทธ์ มั่งมี', phone: '082-345-6789' },
                    tenant: { name: '', phone: '' },
                    status: 'for-rent',
                    rent: 12000,
                    notes: ''
                },
                {
                    id: 3,
                    number: '125/8',
                    type: 'condo',
                    owner: { name: 'นางวิไล สุขใส', phone: '083-456-7890' },
                    tenant: { name: 'นายอนุชา เก่งกาจ', phone: '084-567-8901' },
                    status: 'occupied',
                    rent: 8500,
                    notes: ''
                },
                {
                    id: 4,
                    number: '126/33',
                    type: 'single-house',
                    owner: { name: 'นายสุรชัย ร่ำรวย', phone: '085-678-9012' },
                    tenant: { name: '', phone: '' },
                    status: 'maintenance',
                    rent: 0,
                    notes: 'กำลังปรับปรุงห้องครัว'
                },
                {
                    id: 5,
                    number: '127/15',
                    type: 'townhouse',
                    owner: { name: 'นางสาวปิยะดา ใสสะอาด', phone: '086-789-0123' },
                    tenant: { name: '', phone: '' },
                    status: 'vacant',
                    rent: 0,
                    notes: ''
                }
            ];

            // Render the new table
            renderNewPropertiesTable();
        }

        function renderNewPropertiesTable() {
            const tbody = document.getElementById('propertiesTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';

            // Sort properties by house number (ascending)
            const sortedProperties = [...window.properties].sort((a, b) => {
                const getNumericPart = (houseNumber) => {
                    const match = houseNumber.match(/(\d+)/);
                    return match ? parseInt(match[1]) : 0;
                };
                return getNumericPart(a.number) - getNumericPart(b.number);
            });

            sortedProperties.forEach((property, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td><strong>${property.number}</strong></td>
                    <td><span class="property-type ${property.type}">${getNewPropertyTypeText(property.type)}</span></td>
                    <td>
                        <div class="person-info">
                            <strong>${property.owner.name}</strong>
                            ${property.owner.phone ? `<small>${property.owner.phone}</small>` : ''}
                        </div>
                    </td>
                    <td>
                        ${property.tenant.name ? `
                            <div class="person-info">
                                <strong>${property.tenant.name}</strong>
                                ${property.tenant.phone ? `<small>${property.tenant.phone}</small>` : ''}
                            </div>
                        ` : '<span class="text-muted">-</span>'}
                    </td>
                    <td><span class="status-badge ${property.status}">${getNewStatusText(property.status)}</span></td>
                    <td>${property.rent > 0 ? `<strong>฿${property.rent.toLocaleString()}</strong>` : '<span class="text-muted">-</span>'}</td>
                    <td>
                        <div class="property-action-buttons">
                            <button class="btn-property-action btn-property-view" onclick="viewNewProperty(${property.id})" title="ดูรายละเอียด">ดู</button>
                            <button class="btn-property-action btn-property-edit" onclick="editNewProperty(${property.id})" title="แก้ไข">แก้ไข</button>
                            <button class="btn-property-action btn-property-delete" onclick="deleteNewProperty(${property.id})" title="ลบ">ลบ</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });

            updateNewPropertyPageInfo();
        }

        function getNewPropertyTypeText(type) {
            const types = {
                'single-house': 'บ้านเดี่ยว',
                'townhouse': 'ทาวน์เฮาส์',
                'condo': 'คอนโดมิเนียม'
            };
            return types[type] || type;
        }

        function getNewStatusText(status) {
            const statuses = {
                'occupied': 'มีผู้อยู่อาศัย',
                'vacant': 'ว่าง',
                'for-rent': 'ให้เช่า',
                'maintenance': 'ปรับปรุง'
            };
            return statuses[status] || status;
        }

        function updateNewPropertyPageInfo() {
            const pageInfoElement = document.getElementById('pageInfo');
            if (pageInfoElement) {
                pageInfoElement.textContent = `หน้า 1 จาก 1 (${window.properties.length} รายการ)`;
            }
        }

        function searchProperties() {
            const searchTerm = document.getElementById('propertySearchInput').value.toLowerCase();
            const rows = document.querySelectorAll('#propertiesTableBody tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        }

        function viewNewProperty(id) {
            const property = window.properties.find(p => p.id === id);
            if (property) {
                alert(`รายละเอียดทรัพย์สิน:\n\nบ้านเลขที่: ${property.number}\nประเภท: ${getNewPropertyTypeText(property.type)}\nเจ้าของ: ${property.owner.name}\nผู้เช่า: ${property.tenant.name || '-'}\nสถานะ: ${getNewStatusText(property.status)}\nค่าเช่า: ${property.rent > 0 ? property.rent.toLocaleString() + ' บาท' : '-'}\nหมายเหตุ: ${property.notes || '-'}`);
            }
        }

        function editNewProperty(id) {
            alert('ฟีเจอร์แก้ไขทรัพย์สินจะพัฒนาในขั้นตอนถัดไป');
        }

        function deleteNewProperty(id) {
            const property = window.properties.find(p => p.id === id);
            if (property && confirm(`คุณแน่ใจหรือไม่ที่จะลบทรัพย์สิน ${property.number}?`)) {
                window.properties = window.properties.filter(p => p.id !== id);
                renderNewPropertiesTable();
                alert('ลบทรัพย์สินเรียบร้อยแล้ว');
            }
        }

        function openAddPropertyModal() {
            currentEditPropertyId = null;
            document.getElementById('propertyModalTitle').textContent = 'เพิ่มทรัพย์สินใหม่';
            document.getElementById('propertyForm').reset();
            document.getElementById('propertyModal').style.display = 'flex';
        }

        function editNewProperty(id) {
            const property = window.properties.find(p => p.id === id);
            if (!property) return;

            currentEditPropertyId = id;
            document.getElementById('propertyModalTitle').textContent = 'แก้ไขทรัพย์สิน';
            
            // Fill form with property data
            document.getElementById('propertyNumber').value = property.number;
            document.getElementById('propertyType').value = property.type;
            document.getElementById('ownerName').value = property.owner.name;
            document.getElementById('ownerPhone').value = property.owner.phone;
            document.getElementById('tenantName').value = property.tenant.name || '';
            document.getElementById('tenantPhone').value = property.tenant.phone || '';
            document.getElementById('propertyStatus').value = property.status;
            document.getElementById('rentAmount').value = property.rent > 0 ? property.rent : '';
            document.getElementById('propertyNotes').value = property.notes || '';

            document.getElementById('propertyModal').style.display = 'flex';
        }

        function closePropertyModal() {
            document.getElementById('propertyModal').style.display = 'none';
            currentEditPropertyId = null;
        }

        function saveProperty() {
            const form = document.getElementById('propertyForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            const propertyData = {
                number: document.getElementById('propertyNumber').value.trim(),
                type: document.getElementById('propertyType').value,
                owner: {
                    name: document.getElementById('ownerName').value.trim(),
                    phone: document.getElementById('ownerPhone').value.trim()
                },
                tenant: {
                    name: document.getElementById('tenantName').value.trim(),
                    phone: document.getElementById('tenantPhone').value.trim()
                },
                status: document.getElementById('propertyStatus').value,
                rent: parseInt(document.getElementById('rentAmount').value) || 0,
                notes: document.getElementById('propertyNotes').value.trim()
            };

            // Validate required fields
            if (!propertyData.number || !propertyData.type || !propertyData.status) {
                alert('กรุณากรอกข้อมูลที่จำเป็นให้ครบถ้วน');
                return;
            }

            // Check for duplicate house number (except when editing)
            const existingProperty = window.properties.find(p => 
                p.number === propertyData.number && p.id !== currentEditPropertyId
            );
            if (existingProperty) {
                alert('บ้านเลขที่นี้มีอยู่ในระบบแล้ว');
                return;
            }

            if (currentEditPropertyId) {
                // Update existing property
                const index = window.properties.findIndex(p => p.id === currentEditPropertyId);
                if (index !== -1) {
                    window.properties[index] = { 
                        ...window.properties[index], 
                        ...propertyData 
                    };
                }
                alert('แก้ไขทรัพย์สินเรียบร้อยแล้ว');
            } else {
                // Add new property
                const newId = Math.max(...window.properties.map(p => p.id)) + 1;
                propertyData.id = newId;
                window.properties.push(propertyData);
                alert('เพิ่มทรัพย์สินใหม่เรียบร้อยแล้ว');
            }

            renderNewPropertiesTable();
            closePropertyModal();
        }

        function deleteNewProperty(id) {
            const property = window.properties.find(p => p.id === id);
            if (!property) return;

            currentDeletePropertyId = id;
            document.getElementById('deletePropertyName').textContent = property.number;
            document.getElementById('deletePropertyModal').style.display = 'flex';
        }

        function closeDeletePropertyModal() {
            document.getElementById('deletePropertyModal').style.display = 'none';
            currentDeletePropertyId = null;
        }

        function confirmDeleteProperty() {
            if (currentDeletePropertyId) {
                window.properties = window.properties.filter(p => p.id !== currentDeletePropertyId);
                renderNewPropertiesTable();
                closeDeletePropertyModal();
                alert('ลบทรัพย์สินเรียบร้อยแล้ว');
            }
        }

        // Add global variables for modal state
        let currentEditPropertyId = null;
        let currentDeletePropertyId = null;

        function previousPage() {
            alert('ฟังก์ชันนี้จะพัฒนาเมื่อมีข้อมูลมากขึ้น');
        }

        function nextPage() {
            alert('ฟังก์ชันนี้จะพัฒนาเมื่อมีข้อมูลมากขึ้น');
        }

        // Navigation
        document.addEventListener('DOMContentLoaded', function() {
            checkSuperAdminAccess();
            
            // Initialize Property Management table with new data structure
            initializePropertyManagement();
            
            const links = document.querySelectorAll('.sidebar-menu a');
            const sections = document.querySelectorAll('.page-section');

            links.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();

                    links.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');

                    const targetId = this.getAttribute('href').substring(1);
                    sections.forEach(section => {
                        if (section.id === targetId) {
                            section.classList.add('active');
                        } else {
                            section.classList.remove('active');
                        }
                    });
                });
            });

            // Close modals when clicking outside
            window.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) {
                    e.target.style.display = 'none';
                    currentPropertyId = null;
                }
            });

            // ESC key to close modals
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    const modals = document.querySelectorAll('.modal');
                    modals.forEach(modal => {
                        if (modal.style.display === 'flex') {
                            modal.style.display = 'none';
                        }
                    });
                    currentPropertyId = null;
                }
            });
        });
    </script>

</body>
</html>

